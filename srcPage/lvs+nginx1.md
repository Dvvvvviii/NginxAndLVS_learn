# <font color="#20B2AA" size="8">LVS</font> + <font color="#FF7F50" size="8">Nginx</font>实现高可用集群
---------------------------------------
> 现状：随用户量不断增多，单体面临瓶颈
---------------------------------------
- ### 1.1单体部署
- #### 1.1.1单体架构的优点
> - 小团队成型即可完成开发-测试-上线  
> - 迭代周期短，速度快  
> - 打包方便，运维省事

- #### 1.1.2单体架构面临的挑战

> |<font color="#00dd00" size="4">面临问题</font><br />|<font color="#4682B4" size="4">应对方案</font><br />|
|:---:|:---:|
|<font color="#666600">单节点宕机造成所有服务不可用</font><br />|通过`集群`实现高可用|
|<font color="#666600">单体代码越来越臃肿，耦合度太高，使迭代、测试以及部署更加麻烦</font><br /> |通过业务拆分，即`分布式`或`微服务`进行改进|
|<font color="#666600">单节点并发能力始终有限（服务器并发能力和自身优化及硬件配置相关）</font><br /> |通过`负载均衡(Load Balance)`来降低服务器负载压力，分发用户请求到其他计算机节点|

- ### 1.2集群概念
> - 计算机群体构成整个系统
> - 这个群体构成一个整体，不能独立存在（可以互相ping通）
> - 群体提升并发与可用性，单业务部署到多服务器，降低单服务器压力
> - 只要是多服务器实现了共同业务，那就称之为`集群`
> - 如果每个计算机节点运行的业务不同，则称之为`分布式`

- #### 1.2.1使用集群的优势
> - 随流量增多，集群流量分发给不同节点，轻松`增强系统的整体性能`
> - 不怕单节点宕机，提高系统可用性,即`高可用`
> - 当预测到高流量时，可预先增加计算机节点，流量减少后再减少，集群具有`可扩展性`

- #### 1.2.2使用集群的注意点
> - <font color="#00dd00">用户会话</font><br />当在集群中时，需要使用分布式会话
> - <font color="#00dd00">定时任务</font><br />当设定定时任务时，集群中所有节点都会在该时间运行相同任务，浪费资源，需要单独部署一台服务器进行定时任务或AMQ延时任务
> - <font color="#00dd00">内网互通</font><br />在一个集群中，必须保障互相连通